import{a as J}from"./chunk-L72NH52P.js";import{b as V,c as $}from"./chunk-KXV4LCLH.js";import{e as y,g as w}from"./chunk-K6XGXEEI.js";import{b as K,c as Q}from"./chunk-4CJKOLEN.js";import{c as O,d as U,i as N,j as A,m as k,n as q,o as z,p as L,r as W}from"./chunk-YDHWOYVD.js";import{$ as c,Z as P,ba as H,ca as D,da as b,fa as f,ha as R,ja as B,ka as T,la as j,na as G}from"./chunk-KGMDBVA3.js";import{Cb as r,Db as i,Eb as v,Hc as M,Ic as F,Kb as _,Lb as S,Nc as E,Vb as m,Wb as I,Xa as n,Xb as x,Yb as C,ab as u,hb as g,lb as d,sb as l}from"./chunk-ZGQRFODO.js";function Y(t,e){if(t&1&&(r(0,"mat-form-field",5)(1,"mat-label"),m(2,"ID"),i(),v(3,"input",13),i()),t&2){let a=S();n(3),l("value",a.id)}}function Z(t,e){t&1&&(r(0,"mat-error"),m(1," Selecciona una fecha v\xE1lida. "),i())}function ee(t,e){t&1&&(r(0,"mat-error"),m(1," Selecciona una hora v\xE1lida. "),i())}function ie(t,e){if(t&1&&(r(0,"mat-option",14),m(1),i()),t&2){let a=e.$implicit;l("value",a.idUsuario),n(),C(" ",a.nombre," ",a.apellido," ")}}function te(t,e){t&1&&(r(0,"mat-error"),m(1," Selecciona un psic\xF3logo. "),i())}var X=class t{constructor(e,a,o,s,p){this.formBuilder=e;this.horarioService=a;this.usuarioService=o;this.router=s;this.route=p}form=new b({});horario={};usuariosDisponibles=[];id=0;edicion=!1;ngOnInit(){this.route.params.subscribe(e=>{this.id=e.id,this.edicion=this.id!=null,this.init()}),this.form=this.formBuilder.group({fecha:["",c.required],hora:["",c.required],idUsuario:["",c.required],disponible:[!0,c.required]}),this.usuarioService.list().subscribe(e=>{this.usuariosDisponibles=e})}aceptar(){this.form.valid&&(this.horario.idHorario=this.edicion?this.id:0,this.horario.fecha=this.form.value.fecha,this.horario.hora=this.form.value.hora,this.horario.idUsuario=this.form.value.idUsuario,this.horario.disponible=this.form.value.disponible,this.edicion?this.horarioService.update(this.horario).subscribe(()=>{this.horarioService.list().subscribe(e=>{this.horarioService.setList(e)})}):this.horarioService.insert(this.horario).subscribe(()=>{this.horarioService.list().subscribe(e=>{this.horarioService.setList(e)})}),this.router.navigate(["horarios"]))}init(){this.edicion&&this.horarioService.listId(this.id).subscribe(e=>{this.form=new b({fecha:new f(e.fecha),hora:new f(e.hora),idUsuario:new f(e.idUsuario),disponible:new f(e.disponible)})})}static \u0275fac=function(a){return new(a||t)(u(j),u(W),u(J),u(w),u(y))};static \u0275cmp=g({type:t,selectors:[["app-insertareditarhorario"]],decls:26,vars:8,consts:[[1,"container"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"left-column"],["class","example-full-width",4,"ngIf"],[1,"example-full-width"],["matInput","","type","date","formControlName","fecha"],[4,"ngIf"],["matInput","","type","time","formControlName","hora"],[1,"right-column"],["formControlName","idUsuario"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","type","submit",1,"btn-accion"],["matInput","","disabled","",3,"value"],[3,"value"]],template:function(a,o){if(a&1&&(r(0,"div",0)(1,"h1"),m(2),i(),r(3,"form",1),_("ngSubmit",function(){return o.aceptar()}),r(4,"div",2)(5,"div",3),d(6,Y,4,1,"mat-form-field",4),r(7,"mat-form-field",5)(8,"mat-label"),m(9,"Fecha"),i(),v(10,"input",6),d(11,Z,2,0,"mat-error",7),i(),r(12,"mat-form-field",5)(13,"mat-label"),m(14,"Hora"),i(),v(15,"input",8),d(16,ee,2,0,"mat-error",7),i()(),r(17,"div",9)(18,"mat-form-field",5)(19,"mat-label"),m(20,"Psic\xF3logo"),i(),r(21,"mat-select",10),d(22,ie,2,3,"mat-option",11),i(),d(23,te,2,0,"mat-error",7),i()()(),r(24,"button",12),m(25),i()()()),a&2){let s,p,h;n(2),I(o.edicion?"Editar Horario":"Registro de Horario"),n(),l("formGroup",o.form),n(3),l("ngIf",o.edicion),n(5),l("ngIf",((s=o.form.get("fecha"))==null?null:s.invalid)&&((s=o.form.get("fecha"))==null?null:s.touched)),n(5),l("ngIf",((p=o.form.get("hora"))==null?null:p.invalid)&&((p=o.form.get("hora"))==null?null:p.touched)),n(6),l("ngForOf",o.usuariosDisponibles),n(),l("ngIf",((h=o.form.get("idUsuario"))==null?null:h.invalid)&&((h=o.form.get("idUsuario"))==null?null:h.touched)),n(2),x(" ",o.edicion?"Actualizar":"Registrar"," ")}},dependencies:[E,M,F,G,R,P,H,D,B,T,Q,K,N,O,U,q,$,V,L,z,A,k],styles:[".container[_ngcontent-%COMP%]{max-width:900px;margin:30px auto;padding:20px;background-color:#f7f7f7;border-radius:15px;box-shadow:0 4px 8px #0000001a}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;font-size:24px;font-weight:600;color:#3f51b5}.form-grid[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{flex:0 0 48%}.example-full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}button.btn-accion[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff;padding:10px 24px;border-radius:8px;font-size:15px;display:block;margin:20px auto 0}button.btn-accion[_ngcontent-%COMP%]:hover{background-color:#303f9f}"]})};export{X as InsertareditarhorarioComponent};
